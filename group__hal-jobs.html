<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Heavy ion Analysis Libriares: Hal-jobs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Heavy ion Analysis Libriares
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__hal-jobs.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Hal-jobs</div></div>
</div><!--header-->
<div class="contents">
<p>application for job management </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>not used </td></tr>
    <tr><td class="paramname">argv</td><td>array of arguments </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<h1>basic usage</h1>
<p>This is a application to submit jobs from XML files. In principle this should be used in following way:</p><ol type="1">
<li>use <b>hal-jobs</b> <b>--prepare</b> <b></b> &lt;batch_system&gt; where batch_system specify the batch system used on cluster, curennlty following batch system are supported torque (<b>pbs_single</b> or <b>pbs_array</b>) and slurm (<b>sbatch_singe</b> or <b>sbatch_array</b> ). This script also creates directories for erros, logs etc.</li>
<li>edit your xml configuration file - usually by modifying "job commands" section 3a. create your job scripts by <b>hal-jobs</b> <b>--submit</b> <b></b> &lt;xml_configuration_file&gt; <b></b> &ndash;stage=prepare, this command create job files that will be sent to batch system 3b. send your job scripts by <b>hal-jobs</b> <b>--sumbit</b> <b></b> &lt;xml_configuration_file&gt; <b>&ndash;stage=deploy</b> </li>
<li>alternatively instead of calling 3a and 3b you can prepare &amp; submit you jobs by <b>hal-jobs</b> <b></b> &lt;xml_configuration_file&gt;</li>
</ol>
<h1>structure of input file</h1>
<h2>settings - main settings of jobs</h2>
<ol type="1">
<li>submit - the submit command - the command used to submit job file</li>
<li>submit_start the id of first job</li>
<li>submit_end the id of last job</li>
<li>shell - the shell, first line in script sent to the computing cluster <h2>job_options</h2>
</li>
</ol>
<p>Options of the jobs. In principle they are added to the scripts just like commands. Here use can also specify <b>array</b> <b>attribute</b>, if it set to "yes" only one job file is prepared and sent to the cluster - this is so called job array, overwrite many separate jobs after send. The size of array/number of jobs is defined by <b>submit_start</b> and <b>submit_end</b> . </p><h2>job_commands</h2>
<p>The lines that will be written to the job file,in principle they are commands executed by a job script.. </p><dl class="section note"><dt>Note</dt><dd>Some of job_commands should not be changed e.g. \ export JOB_ID_HAL=<code>expr $SLURM_ARRAY_TASK_ID + $ONE</code> in sbatch_array is the only way to get unique_id for each job in array</dd></dl>
<h1>export option</h1>
<p>hal jobs has the option <b>--export=</b> &lt;data_file&gt; &ndash;id=&lt;id&gt; &ndash;par=&lt;par_id&gt; returns the parameter number <b>par_id</b> <b>for</b> job number <b>par_id</b> from <b>data_file</b>. The data file might look like this. </p><pre class="fragment">=======_HAL_JOBS_INPUT_FILE_=======
NVAR 2 NJOBS 3
job_1 data_1
job_2 data_2
job_3 data_3</pre><p> In this case we have two variables defined for 3 jobs, <b>hal-jobs</b> <b>--export</b> file <b></b> &ndash;id=1 <b></b> &ndash;par=2 returns data_2 </p><h1>special flags</h1>
<p>There are some specjal flags, if they are present in xml file they will be replaced before creation of job file, following special flags are present:</p><ol type="1">
<li>${HAL_PWD} path to current directory</li>
<li>${HAL_START_ARRAY} value in <b>submit_start</b> </li>
<li>${HAL_END_ARRAY} value in <b>submit_end</b> </li>
<li>${HAL_JOB_FILE} relative path to job file(files) usually jobs/job_array (for arrays) or jobs/job_i for i-th file</li>
<li>${HAL_JOB_ID} the id for given file (only for sending many small jobs - doesn't work for an array</li>
</ol>
<dl class="section see"><dt>See also</dt><dd>HalJobs::CreateDummyTxtFile </dd>
<dd>
HalJobs::CreateDummyXMLFile @HalJobs </dd></dl>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Oct 23 2024 15:07:52 for Heavy ion Analysis Libriares by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
