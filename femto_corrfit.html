<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Heavy ion Analysis Libriares: Corrfit tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Heavy ion Analysis Libriares
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('femto_corrfit.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Corrfit tutorial</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Generation of pair file</h1>
<p>First step of analysis is generation of file with pairs, this can be done by using standard code for HBT analysis. But instead using a standard code for analysis you should use <a class="el" href="classHal_1_1FemtoDumpPairAna.html">Hal::FemtoDumpPairAna</a>. </p><h1>Generation of scripts</h1>
<p>When you get you pair file you should create a configuration files. For this type: </p><div class="fragment"><div class="line">hal-corrfit 0</div>
</div><!-- fragment --><p> This script will create following structure:</p><ul>
<li>ana.C - macro that calcualte the CF</li>
<li>corrfit_conf.xml - file with corrfit configuration</li>
<li>jobs - directory for storing job files</li>
<li>files - directory for storying calculated CF's In principle you should modify only two files: <h2>config_file</h2>
</li>
</ul>
<p>This file contains configuration parameters. At the begin we say to the corrfit for how many parameters we want to generate map. In the example below we want to have maps with Rout/Rside/Rlong=1,2,3,4,5,6,7,8,9,10 fm. This mean generation of 1000 correlation functions. </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">CorrfitConfig</span>&gt;</div>
<div class="line">&lt;<span class="keywordtype">Parameters</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">Param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;R_{out}&quot;</span> <span class="keyword">min</span>=<span class="stringliteral">&quot;1&quot;</span> <span class="keyword">max</span>=<span class="stringliteral">&quot;10&quot;</span> <span class="keyword">points</span>=<span class="stringliteral">&quot;10&quot;</span>&gt;&lt;/<span class="keywordtype">Param</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">Param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;R_{side}&quot;</span> <span class="keyword">min</span>=<span class="stringliteral">&quot;1&quot;</span> <span class="keyword">max</span>=<span class="stringliteral">&quot;10&quot;</span> <span class="keyword">points</span>=<span class="stringliteral">&quot;10&quot;</span>&gt;&lt;/<span class="keywordtype">Param</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">Param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;R_{long}&quot;</span> <span class="keyword">min</span>=<span class="stringliteral">&quot;1&quot;</span> <span class="keyword">max</span>=<span class="stringliteral">&quot;10&quot;</span> <span class="keyword">points</span>=<span class="stringliteral">&quot;10&quot;</span>&gt;&lt;/<span class="keywordtype">Param</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">Parameters</span>&gt;</div>
<div class="line">/<span class="keyword">endcode</span></div>
<div class="line"><span class="comment">&lt;!-- full path to file with pairs--&gt;</span></div>
</div><!-- fragment --><p> Then we specify the path to the pair file. </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">PairFile</span>&gt;/<span class="keyword">lustre</span>/<span class="keyword">nyx</span>/<span class="keyword">cbm</span>/<span class="keyword">users</span>/<span class="keyword">wielanek</span>/<span class="keyword">corrfit</span>/<span class="keyword">dumpMc.root</span>&lt;/<span class="keywordtype">PairFile</span>&gt;</div>
<div class="line"><span class="comment">&lt;!-- optional part, use to configure dump pair analysis--&gt;</span></div>
</div><!-- fragment --><p> Next step is defining the CF, here the CF is a 3D correlation function in PRF frame. This function contaisn 50 bins from k*=0 up to 0.5 GeV/c. </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">DumpAnalysisConf</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">CorrelationFunction</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">Name</span>&gt;<span class="keyword">CF</span>&lt;/<span class="keywordtype">Name</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">Frame</span>&gt;<span class="keyword">EKinematics::kPRF</span>&lt;/<span class="keywordtype">Frame</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">Type</span>&gt;<span class="keyword">Femto3DCF</span>&lt;/<span class="keywordtype">Type</span>&gt;</div>
<div class="line"><span class="comment">&lt;!-- optional part, used only for spherical harmonics--&gt;</span></div>
<div class="line">                &lt;<span class="keywordtype">L</span>&gt;3&lt;/<span class="keywordtype">L</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">Xaxis</span> <span class="keyword">bins</span>=<span class="stringliteral">&quot;50&quot;</span> <span class="keyword">min</span>=<span class="stringliteral">&quot;0.0&quot;</span> <span class="keyword">max</span>=<span class="stringliteral">&quot;0.50&quot;</span>&gt;&lt;/<span class="keywordtype">Xaxis</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">Yaxis</span> <span class="keyword">bins</span>=<span class="stringliteral">&quot;50&quot;</span> <span class="keyword">min</span>=<span class="stringliteral">&quot;0.0&quot;</span> <span class="keyword">max</span>=<span class="stringliteral">&quot;0.50&quot;</span>&gt;&lt;/<span class="keywordtype">Yaxis</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">Zaxis</span> <span class="keyword">bins</span>=<span class="stringliteral">&quot;50&quot;</span> <span class="keyword">min</span>=<span class="stringliteral">&quot;0.0&quot;</span> <span class="keyword">max</span>=<span class="stringliteral">&quot;0.50&quot;</span>&gt;&lt;/<span class="keywordtype">Zaxis</span>&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">CorrelationFunction</span>&gt;</div>
</div><!-- fragment --><p> In code below we say that we want to generate a gassian 3-dimensional source in LCMS frame.</p><ul>
<li>The job multiplicity factor mean how many maps will be generated per job (however this function doesn't work yet !).</li>
<li>Weight multiplicy factor say how many freezouts are generated per pair. For each generation new HBT weight is calculated and pair is filled into CF.</li>
<li>Preprocessing multiplicity factor - might be used if user want to reuse pair few times by calling preprocess pair few times.</li>
<li>Calc mode say what kind of data will be used for calculation of CF. S - use signal pairs. B - use background pairs, S+B use signal pairs for numerator and background pairs for denominator.</li>
<li>Ingore sign - ignore momentum sign when fill the CF.</li>
</ul>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">FreezoutGenerator</span>&gt;<span class="keyword">Hal::FemtoFreezoutGeneratorLCMS</span>&lt;/<span class="keywordtype">FreezoutGenerator</span>&gt;</div>
<div class="line">&lt;<span class="keywordtype">SourceModel</span>&gt;<span class="keyword">Hal::FemtoSourceModelGauss3D</span>&lt;/<span class="keywordtype">SourceModel</span>&gt;</div>
<div class="line">&lt;<span class="keywordtype">CalcOptions</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">JobMultiplyFactor</span>&gt;1&lt;/<span class="keywordtype">JobMultiplyFactor</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">WeightMultiplyFactor</span>&gt;1&lt;/<span class="keywordtype">WeightMultiplyFactor</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">PreprocessMultiplyFactor</span>&gt;1&lt;/<span class="keywordtype">PreprocessMultiplyFactor</span>&gt;</div>
<div class="line">        <span class="comment">&lt;!-- S/B/S+B for S(signal) B (background)  B+S (both)--&gt;</span></div>
<div class="line">        &lt;<span class="keywordtype">CalcMode</span>&gt;<span class="keyword">S</span>&lt;/<span class="keywordtype">CalcMode</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">IgnoreSign</span>&gt;<span class="keyword">kTRUE</span>&lt;/<span class="keywordtype">IgnoreSign</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">CalcOptions</span>&gt;</div>
</div><!-- fragment --><p> Next step is configuration of the weight algorithm. </p><div class="fragment"><div class="line">        &lt;<span class="keywordtype">WeightConf</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">Type</span>&gt;<span class="keyword">Hal::FemtoWeightGeneratorLednicky</span>&lt;/<span class="keywordtype">Type</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">QuantumOn</span>&gt;<span class="keyword">kTRUE</span>&lt;/<span class="keywordtype">QuantumOn</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">StronOn</span>&gt;<span class="keyword">kFALSE</span>&lt;/<span class="keywordtype">StronOn</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">CoulombOn</span>&gt;<span class="keyword">kFALSE</span>&lt;/<span class="keywordtype">CoulombOn</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">PairType</span>&gt;211;211&lt;/<span class="keywordtype">PairType</span>&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">WeightConf</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">DumpAnalysisConf</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">CorrfitConfig</span>&gt;</div>
</div><!-- fragment --><h2>job file</h2>
<p>In job file you should change </p><div class="fragment"><div class="line"><a class="code hl_class" href="classHal_1_1CorrFitDumpedPairAna.html">Hal::CorrFitDumpedPairAna</a> *task = <span class="keyword">new</span> <a class="code hl_class" href="classHal_1_1CorrFitDumpedPairAna.html">Hal::CorrFitDumpedPairAna</a>(job_index);</div>
<div class="ttc" id="aclassHal_1_1CorrFitDumpedPairAna_html"><div class="ttname"><a href="classHal_1_1CorrFitDumpedPairAna.html">Hal::CorrFitDumpedPairAna</a></div><div class="ttdef"><b>Definition</b> <a href="CorrFitDumpedPairAna_8h_source.html#l00040">CorrFitDumpedPairAna.h:40</a></div></div>
</div><!-- fragment --><p> to </p><div class="fragment"><div class="line"><a class="code hl_class" href="classHal_1_1CorrFitDumpedPairAnaHorizontal.html">Hal::CorrFitDumpedPairAnaHorizontal</a> *task = <span class="keyword">new</span> <a class="code hl_class" href="classHal_1_1CorrFitDumpedPairAnaHorizontal.html">Hal::CorrFitDumpedPairAnaHorizontal</a>(job_index);</div>
<div class="ttc" id="aclassHal_1_1CorrFitDumpedPairAnaHorizontal_html"><div class="ttname"><a href="classHal_1_1CorrFitDumpedPairAnaHorizontal.html">Hal::CorrFitDumpedPairAnaHorizontal</a></div><div class="ttdef"><b>Definition</b> <a href="CorrFitDumpedPairAnaHorizontal_8h_source.html#l00015">CorrFitDumpedPairAnaHorizontal.h:15</a></div></div>
</div><!-- fragment --><h2>map generation</h2>
<p>Now you can generate the map. For doing this you should call ana.C N-times for each sample in map (in this case 1000). In each job the JOB_ID_HAL is a number of point that should be generated (in our case 0-999). You can use hal-jobs for running simulation or your bash scripts.</p>
<h2>merging map</h2>
<p>To merge map you have to enter the place with directory with xml configuration file an type:</p>
<div class="fragment"><div class="line">hal-corrfit 1</div>
</div><!-- fragment --><p> This will merge all generated CF's into one large map file. If there will be problem with missing point in map you will be warned. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="md_doxygen_2tutorials.html">tutorials</a></li>
    <li class="footer">Generated on Wed Oct 23 2024 15:07:52 for Heavy ion Analysis Libriares by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
